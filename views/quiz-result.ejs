<%- include('partials/header', { title: title }); %>

<div class="quiz-result">
    <div class="result-header">
        <h1 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h1>
        <h2 class="quiz-title"><%= quizTitle %></h2>
    </div>
    
    <div class="result-summary">
        <div class="result-card">
            <div class="result-score">
                <div class="score-number"><%= score %>/<%= total %></div>
                <div class="score-percentage"><%= percentage %>%</div>
            </div>
            
            <div class="result-message">
                <% if (percentage >= 90) { %>
                    <p class="success">–û—Ç–ª–∏—á–Ω–æ! –í—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –∑–Ω–∞–µ—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª! üèÜ</p>
                <% } else if (percentage >= 70) { %>
                    <p class="good">–•–æ—Ä–æ—à–æ! –í—ã —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ —Ç–µ–º–µ! üëç</p>
                <% } else if (percentage >= 50) { %>
                    <p class="average">–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ. –ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å. üìö</p>
                <% } else { %>
                    <p class="poor">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª. üîÑ</p>
                <% } %>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" style="width: <%= percentage %>%;"></div>
            </div>
        </div>
    </div>
    
    <div class="result-details">
        <h3>–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
        
        <div class="questions-review">
            <% results.forEach((result, index) => { %>
            <div class="question-review <%= result.isCorrect ? 'correct' : 'incorrect' %>">
                <div class="question-header">
                    <h4>–í–æ–ø—Ä–æ—Å <%= index + 1 %>: <%= result.question %></h4>
                    <span class="status-badge <%= result.isCorrect ? 'correct' : 'incorrect' %>">
                        <%= result.isCorrect ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ' : '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ' %>
                    </span>
                </div>
                
                <div class="answer-comparison">
                    <div class="answer-item">
                        <strong>–í–∞—à –æ—Ç–≤–µ—Ç:</strong> <%= result.userAnswer %>
                    </div>
                    <% if (!result.isCorrect) { %>
                    <div class="answer-item">
                        <strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</strong> <%= result.correctAnswer %>
                    </div>
                    <% } %>
                </div>
                
                <div class="explanation">
                    <strong>–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:</strong> <%= result.explanation %>
                </div>
            </div>
            <% }); %>
        </div>
    </div>
    
    <div class="result-actions">
        <a href="/quiz" class="btn btn-outline">
            <i class="fas fa-list"></i> –ö —Å–ø–∏—Å–∫—É —Ç–µ—Å—Ç–æ–≤
        </a>
        <a href="/topics" class="btn btn-outline">
            <i class="fas fa-book"></i> –ö —Ç–µ–º–∞–º
        </a>
        <a href="/quiz/<%= quizId %>" class="btn btn-primary">
            <i class="fas fa-redo"></i> –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–Ω–æ–≤–∞
        </a>
    </div>
    
    <div class="result-tips">
        <h3>–°–æ–≤–µ—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
        <ul>
            <li>–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã</li>
            <li>–ò—Å–∫–ª—é—á–∞–π—Ç–µ –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã</li>
            <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤—Ä–µ–º–µ–Ω–µ–º</li>
            <li>–ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞</li>
        </ul>
    </div>
</div>

<%- include('partials/footer'); %>