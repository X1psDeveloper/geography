<%- include('partials/header', { title: title }) %>

<h1 class="section-title">–¢–µ—Å—Ç—ã –∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h1>
<p class="text-center mb-xl">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –∏ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.</p>

<!-- –§–∏–ª—å—Ç—Ä—ã –±–æ–ª—å—à–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è ‚Äî —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–í—Å–µ —Ç–µ—Å—Ç—ã" -->
<!-- <div class="filter-group"> ... </div> —É–¥–∞–ª—ë–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é -->

<!-- –ü–æ–∏—Å–∫ (–æ—Å—Ç–∞–≤–ª—è–µ–º, –æ–Ω –ø–æ–ª–µ–∑–µ–Ω) -->
<div class="search-box" style="max-width: 500px; margin: 0 auto 40px auto;">
    <i class="fas fa-search"></i>
    <input type="text" id="quiz-search" class="form-control" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–µ—Å—Ç–æ–≤..." style="padding-left: 45px;">
</div>

<!-- –°–µ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤ -->
<div class="grid grid-3" id="quiz-grid">
    <% if (quizzes && quizzes.length > 0) { %>
        <% quizzes.forEach(quiz => { %>
            <div class="quiz-card card" data-quiz-id="<%= quiz.id %>" style="cursor: pointer;">
                <div class="quiz-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <h3 class="quiz-title"><%= quiz.title %></h3>
                <p class="quiz-description"><%= quiz.description || '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è' %></p>
                <div class="quiz-meta">
                    <span><i class="fas fa-list-ol"></i> <%= quiz.questions ? quiz.questions.length : 0 %> –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                </div>
                <a href="/quiz/<%= quiz.id %>" class="btn btn-primary" style="margin-top: 20px;">
                    <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                </a>
            </div>
        <% }); %>
    <% } else { %>
        <div class="empty-state" style="grid-column: 1/-1; text-align: center; padding: 60px;">
            <i class="fas fa-clipboard-list fa-3x" style="color: var(--color-primary);"></i>
            <h3>–¢–µ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
            <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã.</p>
        </div>
    <% } %>
</div>

<script>
    // –ü–æ–∏—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('quiz-search');
        const quizCards = document.querySelectorAll('.quiz-card');

        if (searchInput) {
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                quizCards.forEach(card => {
                    const title = card.querySelector('.quiz-title')?.textContent.toLowerCase() || '';
                    const desc = card.querySelector('.quiz-description')?.textContent.toLowerCase() || '';
                    if (title.includes(query) || desc.includes(query)) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        }

        // –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –≤–µ–¥—ë—Ç –Ω–∞ —Ç–µ—Å—Ç
        quizCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ (—á—Ç–æ–±—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ –¥–≤–∞ —Ä–∞–∑–∞)
                if (e.target.tagName === 'A' || e.target.closest('a')) return;
                const quizId = this.dataset.quizId;
                if (quizId) window.location.href = `/quiz/${quizId}`;
            });
        });
    });
</script>

<%- include('partials/footer'); %>